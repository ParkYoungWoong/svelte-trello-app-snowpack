function at(){return(at=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function rt(t){if(typeof window!="undefined"&&window.navigator)return!!navigator.userAgent.match(t)}var lt=rt(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Mt=rt(/Edge/i),Me=rt(/firefox/i),Wt=rt(/safari/i)&&!rt(/chrome/i)&&!rt(/android/i),Oe=rt(/iP(ad|od|hone)/i),Qe=rt(/chrome/i)&&rt(/android/i),Ie={capture:!1,passive:!1};function y(t,e,n){t.addEventListener(e,n,!lt&&Ie)}function E(t,e,n){t.removeEventListener(e,n,!lt&&Ie)}function jt(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(n){return!1}return!1}}function $e(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function J(t,e,n,i){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&jt(t,e):jt(t,e))||i&&t===n)return t;if(t===n)break}while(t=$e(t))}return null}var Ot,Ne=/\s+/g;function T(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(Ne," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(Ne," ")}}function f(t,e,n){var i=t&&t.style;if(i){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];e in i||e.indexOf("webkit")!==-1||(e="-webkit-"+e),i[e]=n+(typeof n=="string"?"":"px")}}function vt(t,e){var n="";if(typeof t=="string")n=t;else do{var i=f(t,"transform");i&&i!=="none"&&(n=i+" "+n)}while(!e&&(t=t.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function Ae(t,e,n){if(t){var i=t.getElementsByTagName(e),o=0,a=i.length;if(n)for(;o<a;o++)n(i[o],o);return i}return[]}function ot(){return document.scrollingElement||document.documentElement}function M(t,e,n,i,o){if(t.getBoundingClientRect||t===window){var a,l,r,s,u,h,p;if(t!==window&&t!==ot()?(l=(a=t.getBoundingClientRect()).top,r=a.left,s=a.bottom,u=a.right,h=a.height,p=a.width):(l=0,r=0,s=window.innerHeight,u=window.innerWidth,h=window.innerHeight,p=window.innerWidth),(e||n)&&t!==window&&(o=o||t.parentNode,!lt))do if(o&&o.getBoundingClientRect&&(f(o,"transform")!=="none"||n&&f(o,"position")!=="static")){var w=o.getBoundingClientRect();l-=w.top+parseInt(f(o,"border-top-width")),r-=w.left+parseInt(f(o,"border-left-width")),s=l+a.height,u=r+a.width;break}while(o=o.parentNode);if(i&&t!==window){var d=vt(o||t),_=d&&d.a,v=d&&d.d;d&&(s=(l/=v)+(h/=v),u=(r/=_)+(p/=_))}return{top:l,left:r,bottom:s,right:u,width:p,height:h}}}function Pe(t,e,n){for(var i=ct(t,!0),o=M(t)[e];i;){var a=M(i)[n];if(!(n==="top"||n==="left"?o>=a:o<=a))return i;if(i===ot())break;i=ct(i,!1)}return!1}function zt(t,e,n){for(var i=0,o=0,a=t.children;o<a.length;){if(a[o].style.display!=="none"&&a[o]!==g.ghost&&a[o]!==g.dragged&&J(a[o],n.draggable,t,!1)){if(i===e)return a[o];i++}o++}return null}function se(t,e){for(var n=t.lastElementChild;n&&(n===g.ghost||f(n,"display")==="none"||e&&!jt(n,e));)n=n.previousElementSibling;return n||null}function O(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()==="TEMPLATE"||t===g.clone||e&&!jt(t,e)||n++;return n}function ke(t){var e=0,n=0,i=ot();if(t)do{var o=vt(t);e+=t.scrollLeft*o.a,n+=t.scrollTop*o.d}while(t!==i&&(t=t.parentNode));return[e,n]}function ct(t,e){if(!t||!t.getBoundingClientRect)return ot();var n=t,i=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=f(n);if(n.clientWidth<n.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return ot();if(i||e)return n;i=!0}}while(n=n.parentNode);return ot()}function ce(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function Re(t,e){return function(){if(!Ot){var n=arguments,i=this;n.length===1?t.call(i,n[0]):t.apply(i,n),Ot=setTimeout(function(){Ot=void 0},e)}}}function Be(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function ue(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function Ye(t,e){f(t,"position","absolute"),f(t,"top",e.top),f(t,"left",e.left),f(t,"width",e.width),f(t,"height",e.height)}function de(t){f(t,"position",""),f(t,"top",""),f(t,"left",""),f(t,"width",""),f(t,"height","")}var X="Sortable"+new Date().getTime(),It=[],he={initializeByDefault:!0},Nt={mount:function(t){for(var e in he)he.hasOwnProperty(e)&&!(e in t)&&(t[e]=he[e]);It.push(t)},pluginEvent:function(t,e,n){var i=this;this.eventCanceled=!1,n.cancel=function(){i.eventCanceled=!0};var o=t+"Global";It.forEach(function(a){e[a.pluginName]&&(e[a.pluginName][o]&&e[a.pluginName][o](at({sortable:e},n)),e.options[a.pluginName]&&e[a.pluginName][t]&&e[a.pluginName][t](at({sortable:e},n)))})},initializePlugins:function(t,e,n,i){for(var o in It.forEach(function(l){var r=l.pluginName;if(t.options[r]||l.initializeByDefault){var s=new l(t,e,t.options);s.sortable=t,s.options=t.options,t[r]=s,Object.assign(n,s.defaults)}}),t.options)if(t.options.hasOwnProperty(o)){var a=this.modifyOption(t,o,t.options[o]);a!==void 0&&(t.options[o]=a)}},getEventProperties:function(t,e){var n={};return It.forEach(function(i){typeof i.eventProperties=="function"&&Object.assign(n,i.eventProperties.call(e[i.pluginName],t))}),n},modifyOption:function(t,e,n){var i;return It.forEach(function(o){t[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[e]=="function"&&(i=o.optionListeners[e].call(t[o.pluginName],n))}),i}};function At(t){var e=t.sortable,n=t.rootEl,i=t.name,o=t.targetEl,a=t.cloneEl,l=t.toEl,r=t.fromEl,s=t.oldIndex,u=t.newIndex,h=t.oldDraggableIndex,p=t.newDraggableIndex,w=t.originalEvent,d=t.putSortable,_=t.extraEventProperties;if(e=e||n&&n[X]){var v,Y=e.options,L="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||lt||Mt?(v=document.createEvent("Event")).initEvent(i,!0,!0):v=new CustomEvent(i,{bubbles:!0,cancelable:!0}),v.to=l||n,v.from=r||n,v.item=o||n,v.clone=a,v.oldIndex=s,v.newIndex=u,v.oldDraggableIndex=h,v.newDraggableIndex=p,v.originalEvent=w,v.pullMode=d?d.lastPutMode:void 0;var k=at({},_,Nt.getEventProperties(i,e));for(var D in k)v[D]=k[D];n&&n.dispatchEvent(v),Y[L]&&Y[L].call(e,v)}}var K=function(t,e,n){var i=n===void 0?{}:n,o=i.evt,a=function(l,r){if(l==null)return{};var s,u,h={},p=Object.keys(l);for(u=0;u<p.length;u++)r.indexOf(s=p[u])>=0||(h[s]=l[s]);return h}(i,["evt"]);Nt.pluginEvent.bind(g)(t,e,at({dragEl:c,parentEl:N,ghostEl:b,rootEl:x,nextEl:mt,lastDownEl:Gt,cloneEl:I,cloneHidden:ut,dragStarted:kt,putSortable:B,activeSortable:g.active,originalEvent:o,oldIndex:yt,oldDraggableIndex:Pt,newIndex:z,newDraggableIndex:dt,hideGhostForTarget:je,unhideGhostForTarget:ze,cloneNowHidden:function(){ut=!0},cloneNowShown:function(){ut=!1},dispatchSortableEvent:function(l){F({sortable:e,name:l,originalEvent:o})}},a))};function F(t){At(at({putSortable:B,cloneEl:I,targetEl:c,rootEl:x,oldIndex:yt,oldDraggableIndex:Pt,newIndex:z,newDraggableIndex:dt},t))}var c,N,b,x,mt,Gt,I,ut,yt,z,Pt,dt,Ut,B,Dt,tt,fe,pe,Xe,He,kt,_t,Rt,qt,H,St=!1,Vt=!1,Zt=[],Bt=!1,Qt=!1,ge=[],ve=!1,$t=[],Jt=typeof document!="undefined",te=Oe,Fe=Mt||lt?"cssFloat":"float",Je=Jt&&!Qe&&!Oe&&"draggable"in document.createElement("div"),Le=function(){if(Jt){if(lt)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),Ke=function(t,e){var n=f(t),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=zt(t,0,e),a=zt(t,1,e),l=o&&f(o),r=a&&f(a),s=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+M(o).width,u=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+M(a).width;return n.display==="flex"?n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal":n.display==="grid"?n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal":o&&l.float&&l.float!=="none"?!a||r.clear!=="both"&&r.clear!==(l.float==="left"?"left":"right")?"horizontal":"vertical":o&&(l.display==="block"||l.display==="flex"||l.display==="table"||l.display==="grid"||s>=i&&n[Fe]==="none"||a&&n[Fe]==="none"&&s+u>i)?"vertical":"horizontal"},We=function(t){function e(o,a){return function(l,r,s,u){if(o==null&&(a||l.options.group.name&&r.options.group.name&&l.options.group.name===r.options.group.name))return!0;if(o==null||o===!1)return!1;if(a&&o==="clone")return o;if(typeof o=="function")return e(o(l,r,s,u),a)(l,r,s,u);var h=(a?l:r).options.group.name;return o===!0||typeof o=="string"&&o===h||o.join&&o.indexOf(h)>-1}}var n={},i=t.group;i&&typeof i=="object"||(i={name:i}),n.name=i.name,n.checkPull=e(i.pull,!0),n.checkPut=e(i.put),n.revertClone=i.revertClone,t.group=n},je=function(){!Le&&b&&f(b,"display","none")},ze=function(){!Le&&b&&f(b,"display","")};Jt&&document.addEventListener("click",function(t){if(Vt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Vt=!1,!1},!0);var Q,bt=function(t){if(c){var e=(o=(t=t.touches?t.touches[0]:t).clientX,a=t.clientY,Zt.some(function(r){if(!se(r)){var s=M(r),u=r[X].options.emptyInsertThreshold;return u&&o>=s.left-u&&o<=s.right+u&&a>=s.top-u&&a<=s.bottom+u?l=r:void 0}}),l);if(e){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[X]._onDragOver(n)}}var o,a,l},tn=function(t){c&&c.parentNode[X]._isOutsideThisEl(t.target)};function g(t,e){if(!t||!t.nodeType||t.nodeType!==1)throw"Sortable: `el` must be an HTMLElement, not "+{}.toString.call(t);this.el=t,this.options=e=Object.assign({},e),t[X]=this;var n,i,o={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ke(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,s){r.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:g.supportPointer!==!1&&"PointerEvent"in window,emptyInsertThreshold:5};for(var a in Nt.initializePlugins(this,t,o),o)!(a in e)&&(e[a]=o[a]);for(var l in We(e),this)l.charAt(0)==="_"&&typeof this[l]=="function"&&(this[l]=this[l].bind(this));this.nativeDraggable=!e.forceFallback&&Je,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?y(t,"pointerdown",this._onTapStart):(y(t,"mousedown",this._onTapStart),y(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(y(t,"dragover",this),y(t,"dragenter",this)),Zt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Object.assign(this,(i=[],{captureAnimationState:function(){i=[],this.options.animation&&[].slice.call(this.el.children).forEach(function(r){if(f(r,"display")!=="none"&&r!==void 0){i.push({target:r,rect:M(r)});var s=at({},i[i.length-1].rect);if(r.thisAnimationDuration){var u=vt(r,!0);u&&(s.top-=u.f,s.left-=u.e)}r.fromRect=s}})},addAnimationState:function(r){i.push(r)},removeAnimationState:function(r){i.splice(function(s,u){for(var h in s)if(s.hasOwnProperty(h)){for(var p in u)if(u.hasOwnProperty(p)&&u[p]===s[h][p])return Number(h)}return-1}(i,{target:r}),1)},animateAll:function(r){var s=this;if(!this.options.animation)return clearTimeout(n),void(typeof r=="function"&&r());var u=!1,h=0;i.forEach(function(p){var w=0,d=p.target,_=d.fromRect,v=M(d),Y=d.prevFromRect,L=d.prevToRect,k=p.rect,D=vt(d,!0);D&&(v.top-=D.f,v.left-=D.e),d.toRect=v,d.thisAnimationDuration&&ce(Y,v)&&!ce(_,v)&&(k.top-v.top)/(k.left-v.left)==(_.top-v.top)/(_.left-v.left)&&(w=function(q,$,V,ht){return Math.sqrt(Math.pow($.top-q.top,2)+Math.pow($.left-q.left,2))/Math.sqrt(Math.pow($.top-V.top,2)+Math.pow($.left-V.left,2))*ht.animation}(k,Y,L,s.options)),ce(v,_)||(d.prevFromRect=_,d.prevToRect=v,w||(w=s.options.animation),s.animate(d,k,v,w)),w&&(u=!0,h=Math.max(h,w),clearTimeout(d.animationResetTimer),d.animationResetTimer=setTimeout(function(){d.animationTime=0,d.prevFromRect=null,d.fromRect=null,d.prevToRect=null,d.thisAnimationDuration=null},w),d.thisAnimationDuration=w)}),clearTimeout(n),u?n=setTimeout(function(){typeof r=="function"&&r()},h):typeof r=="function"&&r(),i=[]},animate:function(r,s,u,h){if(h){f(r,"transition",""),f(r,"transform","");var p=vt(this.el),w=(s.left-u.left)/(p&&p.a||1),d=(s.top-u.top)/(p&&p.d||1);r.animatingX=!!w,r.animatingY=!!d,f(r,"transform","translate3d("+w+"px,"+d+"px,0)"),this.forRepaintDummy=function(_){return _.offsetWidth}(r),f(r,"transition","transform "+h+"ms"+(this.options.easing?" "+this.options.easing:"")),f(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){f(r,"transition",""),f(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},h)}}}))}function me(t,e,n,i,o,a,l,r){var s,u,h=t[X],p=h.options.onMove;return!window.CustomEvent||lt||Mt?(s=document.createEvent("Event")).initEvent("move",!0,!0):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=e,s.from=t,s.dragged=n,s.draggedRect=i,s.related=o||e,s.relatedRect=a||M(e),s.willInsertAfter=r,s.originalEvent=l,t.dispatchEvent(s),p&&(u=p.call(h,s,l)),u}function be(t){t.draggable=!1}function en(){ve=!1}function nn(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function ee(t){return setTimeout(t,0)}function we(t){return clearTimeout(t)}g.prototype={constructor:g,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(_t=null)},_getDirection:function(t,e){return typeof this.options.direction=="function"?this.options.direction.call(this,t,e,c):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,i=this.options,o=i.preventOnFilter,a=t.type,l=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,r=(l||t).target,s=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||r,u=i.filter;if(function(h){$t.length=0;for(var p=h.getElementsByTagName("input"),w=p.length;w--;){var d=p[w];d.checked&&$t.push(d)}}(n),!c&&!(/mousedown|pointerdown/.test(a)&&t.button!==0||i.disabled)&&!s.isContentEditable&&(this.nativeDraggable||!Wt||!r||r.tagName.toUpperCase()!=="SELECT")&&!((r=J(r,i.draggable,n,!1))&&r.animated||Gt===r)){if(yt=O(r),Pt=O(r,i.draggable),typeof u=="function"){if(u.call(this,t,r,this))return F({sortable:e,rootEl:s,name:"filter",targetEl:r,toEl:n,fromEl:n}),K("filter",e,{evt:t}),void(o&&t.cancelable&&t.preventDefault())}else if(u&&(u=u.split(",").some(function(h){if(h=J(s,h.trim(),n,!1))return F({sortable:e,rootEl:h,name:"filter",targetEl:r,fromEl:n,toEl:n}),K("filter",e,{evt:t}),!0})))return void(o&&t.cancelable&&t.preventDefault());i.handle&&!J(s,i.handle,n,!1)||this._prepareDragStart(t,l,r)}}},_prepareDragStart:function(t,e,n){var i,o=this,a=o.el,l=o.options,r=a.ownerDocument;if(n&&!c&&n.parentNode===a){var s=M(n);if(x=a,N=(c=n).parentNode,mt=c.nextSibling,Gt=n,Ut=l.group,g.dragged=c,Xe=(Dt={target:c,clientX:(e||t).clientX,clientY:(e||t).clientY}).clientX-s.left,He=Dt.clientY-s.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,c.style["will-change"]="all",i=function(){K("delayEnded",o,{evt:t}),g.eventCanceled?o._onDrop():(o._disableDelayedDragEvents(),!Me&&o.nativeDraggable&&(c.draggable=!0),o._triggerDragStart(t,e),F({sortable:o,name:"choose",originalEvent:t}),T(c,l.chosenClass,!0))},l.ignore.split(",").forEach(function(u){Ae(c,u.trim(),be)}),y(r,"dragover",bt),y(r,"mousemove",bt),y(r,"touchmove",bt),y(r,"mouseup",o._onDrop),y(r,"touchend",o._onDrop),y(r,"touchcancel",o._onDrop),Me&&this.nativeDraggable&&(this.options.touchStartThreshold=4,c.draggable=!0),K("delayStart",this,{evt:t}),!l.delay||l.delayOnTouchOnly&&!e||this.nativeDraggable&&(Mt||lt))i();else{if(g.eventCanceled)return void this._onDrop();y(r,"mouseup",o._disableDelayedDrag),y(r,"touchend",o._disableDelayedDrag),y(r,"touchcancel",o._disableDelayedDrag),y(r,"mousemove",o._delayedDragTouchMoveHandler),y(r,"touchmove",o._delayedDragTouchMoveHandler),l.supportPointer&&y(r,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(i,l.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){c&&be(c),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;E(t,"mouseup",this._disableDelayedDrag),E(t,"touchend",this._disableDelayedDrag),E(t,"touchcancel",this._disableDelayedDrag),E(t,"mousemove",this._delayedDragTouchMoveHandler),E(t,"touchmove",this._delayedDragTouchMoveHandler),E(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||t.pointerType=="touch"&&t,!this.nativeDraggable||e?y(document,this.options.supportPointer?"pointermove":e?"touchmove":"mousemove",this._onTouchMove):(y(c,"dragend",this),y(x,"dragstart",this._onDragStart));try{document.selection?ee(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(t,e){if(St=!1,x&&c){K("dragStarted",this,{evt:e}),this.nativeDraggable&&y(document,"dragover",tn);var n=this.options;!t&&T(c,n.dragClass,!1),T(c,n.ghostClass,!0),g.active=this,t&&this._appendGhost(),F({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(tt){this._lastX=tt.clientX,this._lastY=tt.clientY,je();for(var t=document.elementFromPoint(tt.clientX,tt.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(tt.clientX,tt.clientY))!==e;)e=t;if(c.parentNode[X]._isOutsideThisEl(t),e)do{if(e[X]&&e[X]._onDragOver({clientX:tt.clientX,clientY:tt.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break;t=e}while(e=e.parentNode);ze()}},_onTouchMove:function(t){if(Dt){var e=this.options,n=e.fallbackTolerance,i=e.fallbackOffset,o=t.touches?t.touches[0]:t,a=b&&vt(b,!0),l=b&&a&&a.a,r=b&&a&&a.d,s=te&&H&&ke(H),u=(o.clientX-Dt.clientX+i.x)/(l||1)+(s?s[0]-ge[0]:0)/(l||1),h=(o.clientY-Dt.clientY+i.y)/(r||1)+(s?s[1]-ge[1]:0)/(r||1);if(!g.active&&!St){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(b){a?(a.e+=u-(fe||0),a.f+=h-(pe||0)):a={a:1,b:0,c:0,d:1,e:u,f:h};var p="matrix("+a.a+","+a.b+","+a.c+","+a.d+","+a.e+","+a.f+")";f(b,"webkitTransform",p),f(b,"mozTransform",p),f(b,"msTransform",p),f(b,"transform",p),fe=u,pe=h,tt=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!b){var t=this.options.fallbackOnBody?document.body:x,e=M(c,!0,te,!0,t),n=this.options;if(te){for(H=t;f(H,"position")==="static"&&f(H,"transform")==="none"&&H!==document;)H=H.parentNode;H!==document.body&&H!==document.documentElement?(H===document&&(H=ot()),e.top+=H.scrollTop,e.left+=H.scrollLeft):H=ot(),ge=ke(H)}T(b=c.cloneNode(!0),n.ghostClass,!1),T(b,n.fallbackClass,!0),T(b,n.dragClass,!0),f(b,"transition",""),f(b,"transform",""),f(b,"box-sizing","border-box"),f(b,"margin",0),f(b,"top",e.top),f(b,"left",e.left),f(b,"width",e.width),f(b,"height",e.height),f(b,"opacity","0.8"),f(b,"position",te?"absolute":"fixed"),f(b,"zIndex","100000"),f(b,"pointerEvents","none"),g.ghost=b,t.appendChild(b),f(b,"transform-origin",Xe/parseInt(b.style.width)*100+"% "+He/parseInt(b.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,i=t.dataTransfer,o=n.options;K("dragStart",this,{evt:t}),g.eventCanceled?this._onDrop():(K("setupClone",this),g.eventCanceled||((I=ue(c)).draggable=!1,I.style["will-change"]="",this._hideClone(),T(I,this.options.chosenClass,!1),g.clone=I),n.cloneId=ee(function(){K("clone",n),g.eventCanceled||(n.options.removeCloneOnHide||x.insertBefore(I,c),n._hideClone(),F({sortable:n,name:"clone"}))}),!e&&T(c,o.dragClass,!0),e?(Vt=!0,n._loopId=setInterval(n._emulateDragOver,50)):(E(document,"mouseup",n._onDrop),E(document,"touchend",n._onDrop),E(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",o.setData&&o.setData.call(n,i,c)),y(document,"drop",n),f(c,"transform","translateZ(0)")),St=!0,n._dragStartId=ee(n._dragStarted.bind(n,e,t)),y(document,"selectstart",n),kt=!0,Wt&&f(document.body,"user-select","none"))},_onDragOver:function(t){var e,n,i,o,a=this.el,l=t.target,r=this.options,s=r.group,u=g.active,h=Ut===s,p=r.sort,w=B||u,d=this,_=!1;if(!ve){if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),l=J(l,r.draggable,a,!0),nt("dragOver"),g.eventCanceled)return _;if(c.contains(t.target)||l.animated&&l.animatingX&&l.animatingY||d._ignoreWhileAnimating===l)return j(!1);if(Vt=!1,u&&!r.disabled&&(h?p||(i=!x.contains(c)):B===this||(this.lastPutMode=Ut.checkPull(this,u,c,t))&&s.checkPut(this,u,c,t))){if(o=this._getDirection(t,l)==="vertical",e=M(c),nt("dragOverValid"),g.eventCanceled)return _;if(i)return N=x,gt(),this._hideClone(),nt("revert"),g.eventCanceled||(mt?x.insertBefore(c,mt):x.appendChild(c)),j(!0);var v=se(a,r.draggable);if(!v||function(S,Z,P){var R=M(se(P.el,P.options.draggable));return Z?S.clientX>R.right+10||S.clientX<=R.right&&S.clientY>R.bottom&&S.clientX>=R.left:S.clientX>R.right&&S.clientY>R.top||S.clientX<=R.right&&S.clientY>R.bottom+10}(t,o,this)&&!v.animated){if(v===c)return j(!1);if(v&&a===t.target&&(l=v),l&&(n=M(l)),me(x,a,c,e,l,n,t,!!l)!==!1)return gt(),a.appendChild(c),N=a,wt(),j(!0)}else if(l.parentNode===a){n=M(l);var Y,L,k,D=c.parentNode!==a,q=!function(S,Z,P){var R=P?S.left:S.top,Et=P?Z.left:Z.top;return R===Et||(P?S.right:S.bottom)===(P?Z.right:Z.bottom)||R+(P?S.width:S.height)/2===Et+(P?Z.width:Z.height)/2}(c.animated&&c.toRect||e,l.animated&&l.toRect||n,o),$=o?"top":"left",V=Pe(l,"top","top")||Pe(c,"top","top"),ht=V?V.scrollTop:void 0;if(_t!==l&&(L=n[$],Bt=!1,Qt=!q&&r.invertSwap||D),(Y=function(S,Z,P,R,Et,Lt,xe,Ve){var it=R?S.clientY:S.clientX,st=R?P.height:P.width,xt=R?P.top:P.left,Kt=R?P.bottom:P.right,le=!1;if(!xe){if(Ve&&qt<st*Et){if(!Bt&&(Rt===1?it>xt+st*Lt/2:it<Kt-st*Lt/2)&&(Bt=!0),Bt)le=!0;else if(Rt===1?it<xt+qt:it>Kt-qt)return-Rt}else if(it>xt+st*(1-Et)/2&&it<Kt-st*(1-Et)/2)return function(Ze){return O(c)<O(Ze)?1:-1}(Z)}return(le=le||xe)&&(it<xt+st*Lt/2||it>Kt-st*Lt/2)?it>xt+st/2?1:-1:0}(t,l,n,o,q?1:r.swapThreshold,r.invertedSwapThreshold==null?r.swapThreshold:r.invertedSwapThreshold,Qt,_t===l))!==0){var Tt=O(c);do k=N.children[Tt-=Y];while(k&&(f(k,"display")==="none"||k===b))}if(Y===0||k===l)return j(!1);_t=l,Rt=Y;var W=l.nextElementSibling,ft=!1,pt=me(x,a,c,e,l,n,t,ft=Y===1);if(pt!==!1)return pt!==1&&pt!==-1||(ft=pt===1),ve=!0,setTimeout(en,30),gt(),ft&&!W?a.appendChild(c):l.parentNode.insertBefore(c,ft?W:l),V&&Be(V,0,ht-V.scrollTop),N=c.parentNode,L===void 0||Qt||(qt=Math.abs(L-M(l)[$])),wt(),j(!0)}if(a.contains(c))return j(!1)}return!1}function nt(S,Z){K(S,d,at({evt:t,isOwner:h,axis:o?"vertical":"horizontal",revert:i,dragRect:e,targetRect:n,canSort:p,fromSortable:w,target:l,completed:j,onMove:function(P,R){return me(x,a,c,e,P,M(P),t,R)},changed:wt},Z))}function gt(){nt("dragOverAnimationCapture"),d.captureAnimationState(),d!==w&&w.captureAnimationState()}function j(S){return nt("dragOverCompleted",{insertion:S}),S&&(h?u._hideClone():u._showClone(d),d!==w&&(T(c,B?B.options.ghostClass:u.options.ghostClass,!1),T(c,r.ghostClass,!0)),B!==d&&d!==g.active?B=d:d===g.active&&B&&(B=null),w===d&&(d._ignoreWhileAnimating=l),d.animateAll(function(){nt("dragOverAnimationComplete"),d._ignoreWhileAnimating=null}),d!==w&&(w.animateAll(),w._ignoreWhileAnimating=null)),(l===c&&!c.animated||l===a&&!l.animated)&&(_t=null),r.dragoverBubble||t.rootEl||l===document||(c.parentNode[X]._isOutsideThisEl(t.target),!S&&bt(t)),!r.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),_=!0}function wt(){z=O(c),dt=O(c,r.draggable),F({sortable:d,name:"change",toEl:a,newIndex:z,newDraggableIndex:dt,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){E(document,"mousemove",this._onTouchMove),E(document,"touchmove",this._onTouchMove),E(document,"pointermove",this._onTouchMove),E(document,"dragover",bt),E(document,"mousemove",bt),E(document,"touchmove",bt)},_offUpEvents:function(){var t=this.el.ownerDocument;E(t,"mouseup",this._onDrop),E(t,"touchend",this._onDrop),E(t,"pointerup",this._onDrop),E(t,"touchcancel",this._onDrop),E(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;z=O(c),dt=O(c,n.draggable),K("drop",this,{evt:t}),N=c&&c.parentNode,z=O(c),dt=O(c,n.draggable),g.eventCanceled||(St=!1,Qt=!1,Bt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),we(this.cloneId),we(this._dragStartId),this.nativeDraggable&&(E(document,"drop",this),E(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Wt&&f(document.body,"user-select",""),f(c,"transform",""),t&&(kt&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),b&&b.parentNode&&b.parentNode.removeChild(b),(x===N||B&&B.lastPutMode!=="clone")&&I&&I.parentNode&&I.parentNode.removeChild(I),c&&(this.nativeDraggable&&E(c,"dragend",this),be(c),c.style["will-change"]="",kt&&!St&&T(c,B?B.options.ghostClass:this.options.ghostClass,!1),T(c,this.options.chosenClass,!1),F({sortable:this,name:"unchoose",toEl:N,newIndex:null,newDraggableIndex:null,originalEvent:t}),x!==N?(z>=0&&(F({rootEl:N,name:"add",toEl:N,fromEl:x,originalEvent:t}),F({sortable:this,name:"remove",toEl:N,originalEvent:t}),F({rootEl:N,name:"sort",toEl:N,fromEl:x,originalEvent:t}),F({sortable:this,name:"sort",toEl:N,originalEvent:t})),B&&B.save()):z!==yt&&z>=0&&(F({sortable:this,name:"update",toEl:N,originalEvent:t}),F({sortable:this,name:"sort",toEl:N,originalEvent:t})),g.active&&(z!=null&&z!==-1||(z=yt,dt=Pt),F({sortable:this,name:"end",toEl:N,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){K("nulling",this),x=c=N=b=mt=I=Gt=ut=Dt=tt=kt=z=dt=yt=Pt=_t=Rt=B=Ut=g.dragged=g.ghost=g.clone=g.active=null,$t.forEach(function(t){t.checked=!0}),$t.length=fe=pe=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":c&&(this._onDragOver(t),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],n=this.el.children,i=0,o=n.length,a=this.options;i<o;i++)J(t=n[i],a.draggable,this.el,!1)&&e.push(t.getAttribute(a.dataIdAttr)||nn(t));return e},sort:function(t){var e={},n=this.el;this.toArray().forEach(function(i,o){var a=n.children[o];J(a,this.options.draggable,n,!1)&&(e[i]=a)},this),t.forEach(function(i){e[i]&&(n.removeChild(e[i]),n.appendChild(e[i]))})},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return J(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(e===void 0)return n[t];var i=Nt.modifyOption(this,t,e);n[t]=i!==void 0?i:e,t==="group"&&We(n)},destroy:function(){K("destroy",this);var t=this.el;t[X]=null,E(t,"mousedown",this._onTapStart),E(t,"touchstart",this._onTapStart),E(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(E(t,"dragover",this),E(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Zt.splice(Zt.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!ut){if(K("hideClone",this),g.eventCanceled)return;f(I,"display","none"),this.options.removeCloneOnHide&&I.parentNode&&I.parentNode.removeChild(I),ut=!0}},_showClone:function(t){if(t.lastPutMode==="clone"){if(ut){if(K("showClone",this),g.eventCanceled)return;c.parentNode!=x||this.options.group.revertClone?mt?x.insertBefore(I,mt):x.appendChild(I):x.insertBefore(I,c),this.options.group.revertClone&&this.animate(c,I),f(I,"display",""),ut=!1}}else this._hideClone()}},Jt&&y(document,"touchmove",function(t){(g.active||St)&&t.cancelable&&t.preventDefault()}),g.utils={on:y,off:E,css:f,find:Ae,is:function(t,e){return!!J(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},throttle:Re,closest:J,toggleClass:T,clone:ue,index:O,nextTick:ee,cancelNextTick:we,detectDirection:Ke,getChild:zt},g.get=function(t){return t[X]},g.mount=function(){var t=[].slice.call(arguments);t[0].constructor===Array&&(t=t[0]),t.forEach(function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not "+{}.toString.call(e);e.utils&&(g.utils=at({},g.utils,e.utils)),Nt.mount(e)})},g.create=function(t,e){return new g(t,e)},g.version="1.12.0";var Yt,et,C,Xt,ne,m=[],G=[],Ht=!1,U=!1,Ct=!1;function Ge(t,e){G.forEach(function(n,i){var o=e.children[n.sortableIndex+(t?Number(i):0)];o?e.insertBefore(n,o):e.appendChild(n)})}function oe(){m.forEach(function(t){t!==C&&t.parentNode&&t.parentNode.removeChild(t)})}var Ue=function(t){var e=t.originalEvent,n=t.putSortable,i=t.dragEl,o=t.dispatchSortableEvent,a=t.unhideGhostForTarget;if(e){var l=n||t.activeSortable;(0,t.hideGhostForTarget)();var r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,s=document.elementFromPoint(r.clientX,r.clientY);a(),l&&!l.el.contains(s)&&(o("spill"),this.onSpill({dragEl:i,putSortable:n}))}};function Ee(){}function ye(){}Ee.prototype={startIndex:null,dragStart:function(t){this.startIndex=t.oldDraggableIndex},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var i=zt(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(e,i):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:Ue},Object.assign(Ee,{pluginName:"revertOnSpill"}),ye.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable||this.sortable;n.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),n.animateAll()},drop:Ue},Object.assign(ye,{pluginName:"removeOnSpill"});var ie,De,_e,Se,ae,Ft,A=[],Ce=!1;function re(){A.forEach(function(t){clearInterval(t.pid)}),A=[]}function qe(){clearInterval(Ft)}var Te=Re(function(t,e,n,i){if(e.scroll){var o,a=(t.touches?t.touches[0]:t).clientX,l=(t.touches?t.touches[0]:t).clientY,r=e.scrollSensitivity,s=e.scrollSpeed,u=ot(),h=!1;De!==n&&(De=n,re(),o=e.scrollFn,(ie=e.scroll)===!0&&(ie=ct(n,!0)));var p=0,w=ie;do{var d=w,_=M(d),v=_.top,Y=_.bottom,L=_.left,k=_.right,D=_.width,q=_.height,$=void 0,V=void 0,ht=d.scrollWidth,Tt=d.scrollHeight,W=f(d),ft=d.scrollLeft,pt=d.scrollTop;d===u?($=D<ht&&(W.overflowX==="auto"||W.overflowX==="scroll"||W.overflowX==="visible"),V=q<Tt&&(W.overflowY==="auto"||W.overflowY==="scroll"||W.overflowY==="visible")):($=D<ht&&(W.overflowX==="auto"||W.overflowX==="scroll"),V=q<Tt&&(W.overflowY==="auto"||W.overflowY==="scroll"));var nt=$&&(Math.abs(k-a)<=r&&ft+D<ht)-(Math.abs(L-a)<=r&&!!ft),gt=V&&(Math.abs(Y-l)<=r&&pt+q<Tt)-(Math.abs(v-l)<=r&&!!pt);if(!A[p])for(var j=0;j<=p;j++)A[j]||(A[j]={});A[p].vx==nt&&A[p].vy==gt&&A[p].el===d||(A[p].el=d,A[p].vx=nt,A[p].vy=gt,clearInterval(A[p].pid),nt==0&&gt==0||(h=!0,A[p].pid=setInterval(function(){i&&this.layer===0&&g.active._onTouchMove(ae);var wt=A[this.layer].vy?A[this.layer].vy*s:0,S=A[this.layer].vx?A[this.layer].vx*s:0;typeof o=="function"&&o.call(g.dragged.parentNode[X],S,wt,t,ae,A[this.layer].el)!=="continue"||Be(A[this.layer].el,S,wt)}.bind({layer:p}),24))),p++}while(e.bubbleScroll&&w!==u&&(w=ct(w,!1)));Ce=h}},30);g.mount(new function(){function t(){for(var e in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(e){var n=e.originalEvent;this.sortable.nativeDraggable?y(document,"dragover",this._handleAutoScroll):y(document,this.options.supportPointer?"pointermove":n.touches?"touchmove":"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var n=e.originalEvent;this.options.dragOverBubble||n.rootEl||this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?E(document,"dragover",this._handleAutoScroll):(E(document,"pointermove",this._handleFallbackAutoScroll),E(document,"touchmove",this._handleFallbackAutoScroll),E(document,"mousemove",this._handleFallbackAutoScroll)),qe(),re(),clearTimeout(Ot),Ot=void 0},nulling:function(){ae=De=ie=Ce=Ft=_e=Se=null,A.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,n){var i=this,o=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,l=document.elementFromPoint(o,a);if(ae=e,n||Mt||lt||Wt){Te(e,this.options,l,n);var r=ct(l,!0);!Ce||Ft&&o===_e&&a===Se||(Ft&&qe(),Ft=setInterval(function(){var s=ct(document.elementFromPoint(o,a),!0);s!==r&&(r=s,re()),Te(e,i.options,s,n)},10),_e=o,Se=a)}else{if(!this.options.bubbleScroll||ct(l,!0)===ot())return void re();Te(e,this.options,ct(l,!1),!1)}}},Object.assign(t,{pluginName:"scroll",initializeByDefault:!0})}),g.mount(ye,Ee),g.mount(new function(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(e){Q=e.dragEl},dragOverValid:function(e){var n=e.completed,i=e.target,o=e.changed,a=e.cancel;if(e.activeSortable.options.swap){var l=this.options;if(i&&i!==this.sortable.el){var r=Q;(0,e.onMove)(i)!==!1?(T(i,l.swapClass,!0),Q=i):Q=null,r&&r!==Q&&T(r,l.swapClass,!1)}o(),n(!0),a()}},drop:function(e){var n,i,o,a,l,r,s=e.activeSortable,u=e.putSortable,h=e.dragEl,p=u||this.sortable,w=this.options;Q&&T(Q,w.swapClass,!1),Q&&(w.swap||u&&u.options.swap)&&h!==Q&&(p.captureAnimationState(),p!==s&&s.captureAnimationState(),r=(i=Q).parentNode,(l=(n=h).parentNode)&&r&&!l.isEqualNode(i)&&!r.isEqualNode(n)&&(o=O(n),a=O(i),l.isEqualNode(r)&&o<a&&a++,l.insertBefore(i,l.children[o]),r.insertBefore(n,r.children[a])),p.animateAll(),p!==s&&s.animateAll())},nulling:function(){Q=null}},Object.assign(t,{pluginName:"swap",eventProperties:function(){return{swapItem:Q}}})}),g.mount(new function(){function t(e){for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));e.options.supportPointer?y(document,"pointerup",this._deselectMultiDrag):(y(document,"mouseup",this._deselectMultiDrag),y(document,"touchend",this._deselectMultiDrag)),y(document,"keydown",this._checkKeyDown),y(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(i,o){var a="";m.length&&et===e?m.forEach(function(l,r){a+=(r?", ":"")+l.textContent}):a=o.textContent,i.setData("Text",a)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(e){C=e.dragEl},delayEnded:function(){this.isMultiDrag=~m.indexOf(C)},setupClone:function(e){var n=e.sortable,i=e.cancel;if(this.isMultiDrag){for(var o=0;o<m.length;o++)G.push(ue(m[o])),G[o].sortableIndex=m[o].sortableIndex,G[o].draggable=!1,G[o].style["will-change"]="",T(G[o],this.options.selectedClass,!1),m[o]===C&&T(G[o],this.options.chosenClass,!1);n._hideClone(),i()}},clone:function(e){var n=e.dispatchSortableEvent,i=e.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||m.length&&et===e.sortable&&(Ge(!0,e.rootEl),n("clone"),i()))},showClone:function(e){var n=e.cloneNowShown,i=e.cancel;this.isMultiDrag&&(Ge(!1,e.rootEl),G.forEach(function(o){f(o,"display","")}),n(),ne=!1,i())},hideClone:function(e){var n=this,i=e.cloneNowHidden,o=e.cancel;this.isMultiDrag&&(G.forEach(function(a){f(a,"display","none"),n.options.removeCloneOnHide&&a.parentNode&&a.parentNode.removeChild(a)}),i(),ne=!0,o())},dragStartGlobal:function(e){!this.isMultiDrag&&et&&et.multiDrag._deselectMultiDrag(),m.forEach(function(n){n.sortableIndex=O(n)}),m=m.sort(function(n,i){return n.sortableIndex-i.sortableIndex}),Ct=!0},dragStarted:function(e){var n=this,i=e.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){m.forEach(function(a){a!==C&&f(a,"position","absolute")});var o=M(C,!1,!0,!0);m.forEach(function(a){a!==C&&Ye(a,o)}),U=!0,Ht=!0}i.animateAll(function(){U=!1,Ht=!1,n.options.animation&&m.forEach(function(a){de(a)}),n.options.sort&&oe()})}},dragOver:function(e){var n=e.completed,i=e.cancel;U&&~m.indexOf(e.target)&&(n(!1),i())},revert:function(e){var n=e.fromSortable,i=e.rootEl,o=e.sortable,a=e.dragRect;m.length>1&&(m.forEach(function(l){o.addAnimationState({target:l,rect:U?M(l):a}),de(l),l.fromRect=a,n.removeAnimationState(l)}),U=!1,function(l,r){m.forEach(function(s,u){var h=r.children[s.sortableIndex+(l?Number(u):0)];h?r.insertBefore(s,h):r.appendChild(s)})}(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(e){var n=e.sortable,i=e.isOwner,o=e.activeSortable,a=e.parentEl,l=e.putSortable,r=this.options;if(e.insertion){if(i&&o._hideClone(),Ht=!1,r.animation&&m.length>1&&(U||!i&&!o.options.sort&&!l)){var s=M(C,!1,!0,!0);m.forEach(function(h){h!==C&&(Ye(h,s),a.appendChild(h))}),U=!0}if(!i)if(U||oe(),m.length>1){var u=ne;o._showClone(n),o.options.animation&&!ne&&u&&G.forEach(function(h){o.addAnimationState({target:h,rect:Xt}),h.fromRect=Xt,h.thisAnimationDuration=null})}else o._showClone(n)}},dragOverAnimationCapture:function(e){var n=e.dragRect,i=e.isOwner,o=e.activeSortable;if(m.forEach(function(l){l.thisAnimationDuration=null}),o.options.animation&&!i&&o.multiDrag.isMultiDrag){Xt=Object.assign({},n);var a=vt(C,!0);Xt.top-=a.f,Xt.left-=a.e}},dragOverAnimationComplete:function(){U&&(U=!1,oe())},drop:function(e){var n=e.originalEvent,i=e.rootEl,o=e.parentEl,a=e.sortable,l=e.dispatchSortableEvent,r=e.oldIndex,s=e.putSortable,u=s||this.sortable;if(n){var h=this.options,p=o.children;if(!Ct)if(h.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),T(C,h.selectedClass,!~m.indexOf(C)),~m.indexOf(C))m.splice(m.indexOf(C),1),Yt=null,At({sortable:a,rootEl:i,name:"deselect",targetEl:C,originalEvt:n});else{if(m.push(C),At({sortable:a,rootEl:i,name:"select",targetEl:C,originalEvt:n}),n.shiftKey&&Yt&&a.el.contains(Yt)){var w,d,_=O(Yt),v=O(C);if(~_&&~v&&_!==v)for(v>_?(d=_,w=v):(d=v,w=_+1);d<w;d++)~m.indexOf(p[d])||(T(p[d],h.selectedClass,!0),m.push(p[d]),At({sortable:a,rootEl:i,name:"select",targetEl:p[d],originalEvt:n}))}else Yt=C;et=u}if(Ct&&this.isMultiDrag){if((o[X].options.sort||o!==i)&&m.length>1){var Y=M(C),L=O(C,":not(."+this.options.selectedClass+")");if(!Ht&&h.animation&&(C.thisAnimationDuration=null),u.captureAnimationState(),!Ht&&(h.animation&&(C.fromRect=Y,m.forEach(function(D){if(D.thisAnimationDuration=null,D!==C){var q=U?M(D):Y;D.fromRect=q,u.addAnimationState({target:D,rect:q})}})),oe(),m.forEach(function(D){p[L]?o.insertBefore(D,p[L]):o.appendChild(D),L++}),r===O(C))){var k=!1;m.forEach(function(D){D.sortableIndex===O(D)||(k=!0)}),k&&l("update")}m.forEach(function(D){de(D)}),u.animateAll()}et=u}(i===o||s&&s.lastPutMode!=="clone")&&G.forEach(function(D){D.parentNode&&D.parentNode.removeChild(D)})}},nullingGlobal:function(){this.isMultiDrag=Ct=!1,G.length=0},destroyGlobal:function(){this._deselectMultiDrag(),E(document,"pointerup",this._deselectMultiDrag),E(document,"mouseup",this._deselectMultiDrag),E(document,"touchend",this._deselectMultiDrag),E(document,"keydown",this._checkKeyDown),E(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(e){if(!(Ct!==void 0&&Ct||et!==this.sortable||e&&J(e.target,this.options.draggable,this.sortable.el,!1)||e&&e.button!==0))for(;m.length;){var n=m[0];T(n,this.options.selectedClass,!1),m.shift(),At({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:n,originalEvt:e})}},_checkKeyDown:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Object.assign(t,{pluginName:"multiDrag",utils:{select:function(e){var n=e.parentNode[X];n&&n.options.multiDrag&&!~m.indexOf(e)&&(et&&et!==n&&(et.multiDrag._deselectMultiDrag(),et=n),T(e,n.options.selectedClass,!0),m.push(e))},deselect:function(e){var n=e.parentNode[X],i=m.indexOf(e);n&&n.options.multiDrag&&~i&&(T(e,n.options.selectedClass,!1),m.splice(i,1))}},eventProperties:function(){var e=this,n=[],i=[];return m.forEach(function(o){var a;n.push({multiDragElement:o,index:o.sortableIndex}),a=U&&o!==C?-1:U?O(o,":not(."+e.options.selectedClass+")"):O(o),i.push({multiDragElement:o,index:a})}),{items:[].concat(m),clones:[].concat(G),oldIndicies:n,newIndicies:i}},optionListeners:{multiDragKey:function(e){return(e=e.toLowerCase())==="ctrl"?e="Control":e.length>1&&(e=e.charAt(0).toUpperCase()+e.substr(1)),e}}})});export default g;

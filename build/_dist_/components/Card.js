import"./Card.css.proxy.js";import{SvelteComponent as S,action_destroyer as I,append as f,attr as c,binding_callbacks as j,detach as E,element as v,init as D,insert as C,listen as m,noop as h,run_all as F,safe_not_equal as x,set_data as J,set_input_value as M,space as g,text as q}from"../../web_modules/svelte/internal.js";import{onDestroy as B,tick as A,createEventDispatcher as G}from"../../web_modules/svelte.js";import{cards as z}from"../store/list.js";import{autoFocusout as H}from"../actions/autoFocusout.js";function K(s){let e,t=s[0].title+"",o,l,i,d,a;return{c(){e=v("div"),o=q(t),l=g(),i=v("div"),i.textContent="Edit",c(i,"class","btn small svelte-z2gyap"),c(e,"class","title svelte-z2gyap")},m(u,r){C(u,e,r),f(e,o),f(e,l),f(e,i),d||(a=m(i,"click",s[6]),d=!0)},p(u,r){r&1&&t!==(t=u[0].title+"")&&J(o,t)},d(u){u&&E(e),d=!1,a()}}}function L(s){let e,t,o,l,i,d,a,u,r,k,y,_;return{c(){e=v("div"),t=v("textarea"),o=g(),l=v("div"),i=v("div"),i.textContent="Save",d=g(),a=v("div"),a.textContent="Cancel",u=g(),r=v("div"),r.textContent="Delete Card",c(t,"placeholder","Enter a title for this card..."),c(t,"class","svelte-z2gyap"),c(i,"class","btn success svelte-z2gyap"),c(a,"class","btn svelte-z2gyap"),c(r,"class","btn danger svelte-z2gyap"),c(l,"class","actions svelte-z2gyap"),c(e,"class","edit-mode svelte-z2gyap")},m(p,b){C(p,e,b),f(e,t),M(t,s[2]),s[10](t),f(e,o),f(e,l),f(l,i),f(l,d),f(l,a),f(l,u),f(l,r),y||(_=[m(t,"input",s[9]),m(t,"keydown",s[11]),m(i,"click",s[4]),m(a,"click",s[7]),m(r,"click",s[5]),I(k=H.call(null,e,s[7]))],y=!0)},p(p,b){b&4&&M(t,p[2])},d(p){p&&E(e),s[10](null),y=!1,F(_)}}}function N(s){let e,t;function o(d,a){return d[1]?L:K}let l=o(s,-1),i=l(s);return{c(){e=v("div"),i.c(),c(e,"class","card svelte-z2gyap"),c(e,"data-card-id",t=s[0].id)},m(d,a){C(d,e,a),i.m(e,null)},p(d,[a]){l===(l=o(d,a))&&i?i.p(d,a):(i.d(1),i=l(d),i&&(i.c(),i.m(e,null))),a&1&&t!==(t=d[0].id)&&c(e,"data-card-id",t)},i:h,o:h,d(d){d&&E(e),i.d()}}}function O(s,e,t){let{listId:o}=e,{card:l}=e,i=!1,d,a;const u=G();function r(){d.trim()&&z.edit({listId:o,cardId:l.id,title:d}),_()}function k(){z.remove({listId:o,cardId:l.id}),_()}async function y(){t(1,i=!0),t(2,d=l.title),u("editMode",!0),await A(),a&&a.focus()}function _(){t(1,i=!1),u("editMode",!1)}B(()=>{_()});function p(){d=this.value,t(2,d)}function b(n){j[n?"unshift":"push"](()=>{a=n,t(3,a)})}const w=n=>{console.log(n.key),n.key==="Enter"&&r(),n.key==="Esc"&&_(),n.key==="Escape"&&_()};return s.$$set=n=>{"listId"in n&&t(8,o=n.listId),"card"in n&&t(0,l=n.card)},[l,i,d,a,r,k,y,_,o,p,b,w]}class P extends S{constructor(s){super();D(this,s,O,N,x,{listId:8,card:0})}}export default P;
